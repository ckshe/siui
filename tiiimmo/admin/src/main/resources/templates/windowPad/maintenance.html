<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>设备维护</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="../../lib/layui-v2.3.0/css/layui.css">
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/plugins/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/windowPad/device.css">
    <link rel="stylesheet" href="../../css/windowPad/scancalc.css">
    <style>
        .layui-form-pane .layui-inline {
            margin: 5px 0;
        }

        .layui-form-pane .layui-form-label {
            width: auto;
            background-color: #fff;
            border-color: #1e9fff;
            color: #1e9fff;
            font-weight: bold;
        }

        .layui-form-pane input,
        .layui-form-pane select {
            border-color: #1e9fff;
            border-radius: 0 2px 2px 0;
        }

        .layui-form-pane input:hover,
        .layui-form-pane input:focus {
            border-color: #1e9fff !important;
            outline: 0;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(21, 144, 238, 0.6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(21, 144, 238, 0.6);
        }

        .layui-form-pane .layui-input-block {
            margin-left: 0px;
            float: left;
        }

        .screen-btn-group .layui-btn {
            padding: 0 14px;
        }

        .timo-table-wrap {
            overflow-y: auto;
            margin: 5px 0;
            position: relative;
        }

        .timo-table {
            color: #000000;
            margin: 0;
        }

        .timo-table.timo-table-fixed {
            table-layout: fixed;
        }

        .timo-table a {
            color: #1e9fff;
        }

        .timo-table a:hover {
            color: #1590ee;
            text-decoration: underline;
        }

        .timo-table th,
        .timo-table td {
            border: 1px solid #dee2e6;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .timo-table td {
            padding: 2px 6px !important;
        }

        .timo-table th {
            vertical-align: bottom;
            border-bottom: 2px solid #dee2e6;
            font-weight: bold;
            background-color: #ffffff;
        }

        .timo-table .timo-table-checkbox {
            width: 20px;
        }

        .timo-table .timo-checkbox {
            margin: 0 1px;
        }

        .timo-table .timo-table-null {
            text-align: center;
        }

        .page-info {
            padding-top: 12px;
            vertical-align: center;
        }

        .page-number {
            display: inline-block;
            padding: 3px;
            padding-top: 1px;
            border-radius: 2px;
            cursor: pointer;
            border: 1px solid #e2e2e2;
            height: 24px;
            margin-left: 6px;
        }

        .btn-group {
            position: relative;
            display: inline-block;
            vertical-align: middle;
        }

        .caret {
            display: inline-block;
            width: 0;
            height: 0;
            margin-left: 2px;
            vertical-align: middle;
            border-top: 4px dashed;
            border-top: 4px solid\9;
            border-right: 4px solid transparent;
            border-left: 4px solid transparent;
        }

        .btn-group .layui-nav-child {
            top: initial;
            left: -20px;
            right: 0;
            margin-top: 2px;
        }

        .btn-group .layui-nav-child a {
            display: block;
            padding: 0 20px;
        }

        .btn-group .layui-nav-child a:hover {
            background-color: #f2f2f2;
            color: #000;
        }

        .btn-group.show .layui-nav-child {
            display: block;
        }

        .screen-btn-group .layui-btn {
            margin-left: 2px;
        }

        .screen-btn-group .btn-group .layui-btn {
            padding-right: 12px;
        }

        .screen-btn-group .btn-group .caret {
            margin-left: 4px;
        }

        tr td:nth-child(5) .layui-table-cell {
            overflow: initial !important;
            padding: 0 !important;
        }

        .layui-table-body.layui-table-main {
            height: 320px !important;
        }

        .layui-form-item {
            display: inline-block !important;
            width: 49%;
        }

        .layui-form-label {
            width: 140px !important;
            margin-right: 5px;
        }

        .layui-table-body.layui-table-main.mainHeight {
            height: auto !important;
        }
        .layui-table-cell{
            height: 38px !important;
            line-height: 38px !important;
        }
    </style>
</head>

<body>
    <!-- <div class="mainBox"> -->
    <div class="layui-tab layui-tab-brief" lay-filter="regular">
        <ul class="layui-tab-title">
            <li class="layui-this">日常维护</li>
            <li>定期维护</li>
            <li>设备参数</li>
        </ul>

        <div class="layui-tab-content">
            <div class="layui-tab-item layui-show">
                <div class="layui-card">
                    <div class="layui-card-header timo-card-header">
                        <span><i class="fa fa-bars"></i> 设备维护</span>
                        <!-- <i class="layui-icon layui-icon-refresh refresh-btn"></i> -->
                    </div>
                    <div class="layui-card-body">
                        <div class="layui-row timo-card-screen">
                            <form class="layui-form pull-left layui-form-pane timo-search-box">
                                <div class="layui-inline">
                                    <label class="layui-form-label">维护类型</label>
                                    <div class="layui-input-block">
                                        <select id="status" name="status" lay-filter="status" placeholder="请输入维护类型"
                                            autocomplete="off">
                                        </select>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <table class="layui-hide" id="table" lay-filter="table"></table>
            </div>
            <!-- 定期维护 -->
            <div class="layui-tab-item">
                <div class="layui-card">
                    <div class="layui-card-header timo-card-header">
                        <span><i class="fa fa-bars"></i> <span id="deviceCode"></span> 定期检测记录表</span>
                        <!-- <i class="layui-icon layui-icon-refresh refresh-btn"></i> -->
                    </div>
                    <div class="layui-card-body">
                        <div class="layui-row timo-card-screen">
                            <form class="layui-form" lay-filter="lay_form">
                                <input class="layui-input" type="hidden" name="regularSafeId" id="regularSafeId">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备名称: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="deviceName"
                                            id="deviceName" placeholder="请输入设备名称">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备编号: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="deviceCode"
                                            id="deviceCode" placeholder="请输入设备编号">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备使用地点: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="devicePlace"
                                            id="devicePlace" placeholder="请输入设备使用地点">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">本次检测日期: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" id="thisSafeTime"
                                            name="thisSafeTime" placeholder="请输入本次检测日期">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">上次检测日期: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" id="lastSafeTime"
                                            name="lastSafeTime" placeholder="请输入上次检测日期">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备环境温度(℃): </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="temperature"
                                            id="temperature" placeholder="请输入设备工作环境温度">
                                    </div>
                                </div>

                                <div class="layui-form-item">
                                    <label class="layui-form-label">检测小组成员: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="safePerson"
                                            id="safePerson" placeholder="请输入检测小组成员">
                                    </div>
                                </div>

                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备环境湿度(%RH): </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="humidity"
                                            id="humidity" placeholder="请输入设备工作环境湿度">
                                    </div>
                                </div>

                                <div class="layui-form-item">
                                    <label class="layui-form-label">检测辅助工具: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="safeTool"
                                            id="safeTool" placeholder="请输入检测辅助工具">
                                    </div>
                                </div>
                                <hr>
                                <div>检测内容：</div>
                                <hr>
                                <table class="layui-hide" id="deviceTable" lay-filter="deviceTable"></table>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">软件版本及确认: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="softwareVersion"
                                            placeholder="请输入软件版本及确认">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">检测结论: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="result"
                                            placeholder="请输入检测结论">
                                    </div>
                                </div>
                                <hr>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备操作员: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="deviceOperator"
                                            placeholder="请输入设备操作员">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">品质监督员: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="qcOperator"
                                            placeholder="请输入品质监督员">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">检测监督员: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="testOperator"
                                            placeholder="请输入检测监督员">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">车间负责人: </label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" name="amongstPerson"
                                            placeholder="请输入车间负责人">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">下次检测日期：</label>
                                    <div class="layui-input-inline">
                                        <input class="layui-input" autocomplete="off" type="text" id="nextSafeTime"
                                            name="nextSafeTime" placeholder="请输入下次检测日期">
                                    </div>
                                </div>
                                <hr>
                                <div class="layui-form-item timo-finally" style="width: 100%; text-align: center;">
                                    <button class="layui-btn" type="button" lay-submit lay-filter="regularFrom">
                                        提交</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 设备参数 -->
            <div class="layui-tab-item">
                <div class="layui-card">
                    <div class="layui-card-header timo-card-header">
                        <span><i class="fa fa-bars"></i> <span id="deviceCode"></span>设备参数</span>
                        <!-- <i class="layui-icon layui-icon-refresh refresh-btn"></i> -->
                        <div class="mainBox"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- </div> -->
    <script type="text/html" id="toolbarmaintenace">
            <button id="sub" class="layui-btn layui-btn-sm" type="button"  lay-event="devs">提交</button>
    </script>
    <script src="../../lib/layui-v2.3.0/layui.js"></script>
    <script src="../../js/common.js"></script>
</body>
<script>
    window.onload = function () {
        layui.use(['jquery', 'form', 'table', 'element', 'laydate'], function () {
            var $ = layui.jquery,
                table = layui.table,
                form = layui.form,
                laydate = layui.laydate,
                element = layui.element;
            var deviceSafeResultSArr = [];
            var tdata = [];
            var tableObj = {
                elem: '#table'
                // , url: '/deviceDateSafe/get' //数据接口
                // , page: true //开启分页
                // , method: 'POST'
                // , loading: false
                // , contentType: 'application/json'
                , defaultToolbar: []
                , toolbar: '#toolbarmaintenace'
                , data: tdata
                , response: {
                    statusCode: 200
                }
                // , parseData: function (res) {
                //     return {
                //         "code": res.code, //解析接口状态
                //         "data": res.data.deviceDateSafeVOS, //解析数据列表
                //         'deviceSafeResultS': res.data.deviceSafeResultS,
                //         "count": res.total, //解析数据长度
                //     };
                // }
                // , where: {
                //     safeTime: timeToDate(new Date(), true).trim(),
                //     safeDeviceCode: getQueryString2('deviceCode'),
                //     safeType: null
                // }
                // , done: function (res, index) {
                //     console.log(res)
                //     if (res.code == 200) {
                //         deviceSafeResultSArr = res.deviceSafeResultS
                //         console.log(deviceSafeResultSArr)
                //     } else {
                //         layer.msg(res.msg, { offset: '15px', time: 3000, icon: 2 });
                //     }
                // }
                , cols: [
                    [
                        {
                            field: 'safeType', title: '维护类型', sort: true, minWidth: 120, templet: function (d) {
                                return d.safeType;
                            }
                        }
                        , { field: 'safeContent', title: '维护内容', sort: true, minWidth: 170 }
                        , { field: 'safePerson', title: '维护人员', sort: true, minWidth: 100 }
                        , {
                            field: 'safeTime', title: '维护时间', sort: true, minWidth: 180, templet: function (d) {
                                return d.safeTime ? timeToDate(d.safeTime) : "";
                            }
                        }
                        , {
                            field: '', title: '维护结果', minWidth: 120, templet: function (d) {
                                var html = '<select name="process_task_status"  class="status" lay-filter="status1">';
                                // + '<option value="">维护结果</option>';
                                deviceSafeResultSArr.forEach(function (t, i) {
                                    if (t == d.safeResult) {
                                        html += '<option  value="' + t + '" selected="selected" >' + t + '</option>';
                                    } else {
                                        html += '<option  value="' + t + '">' + t + '</option>';
                                    }
                                });
                                html += '</select>';
                                return html;
                            }
                        }
                    ]
                ]
            }
            var deviceTdata = [];
            var deviceTableObj = {
                elem: '#deviceTable'
                , defaultToolbar: []
                , data: deviceTdata
                , response: {
                    statusCode: 200
                }
                , parseData: function (res) {
                    return {
                        "code": res.code, //解析接口状态
                        "data": res.data.deviceRegularSafeResVOS, //解析数据列表
                        "count": res.total, //解析数据长度
                    };
                }
                , cols: [
                    [
                        { field: 'safeContent', title: '检测内容', edit: 'text', minWidth: 150 }
                        , { field: 'safeResult', title: '检测结果', edit: 'text', minWidth: 150 }
                        , { field: 'company', title: '单位', edit: 'text', minWidth: 150 }
                    ]
                ]
            }
            table.render(deviceTableObj);
            $("#deviceTable").next().find('.layui-table-main').addClass('mainHeight');
            var datawher = {
                safeTime: timeToDate(new Date(), true).trim(),
                safeDeviceCode: getQueryString2('deviceCode'),
                safeType: null
            }
            form.on('select(status)', function (data) {
                if (data.value == '全部') {
                    data.value = null
                }
                datawher.safeType = data.value;
                ajax(datawher, data.value);
            });
            form.on('select(status1)', function (data) {
                console.log(data)
            });
            table.on('toolbar(table)', function (obj) {
                switch (obj.event) {
                    case 'devs':
                        var status = document.getElementsByClassName('status');
                        var k = 0;
                        tdata.forEach(function (t, i) {
                            t.safeResult = status[i].value;
                            t.safePerson = parent.document.getElementById('userName').innerHTML;
                        })
                        console.log(tdata)
                        deviceDateSafeEditAjax(tdata)
                        break;
                }
            });

            function ajax(datawher, selectValue) {
                $.ajax({
                    type: "POST",
                    url: '/deviceDateSafe/get',
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(datawher),
                    dataType: "json",
                    async: false,
                    success: function (res) {
                        layer.closeAll()
                        if (res.code == 200) {
                            tdata = res.data.deviceDateSafeVOS;
                            deviceSafeResultSArr = res.data.deviceSafeResultS
                            tableObj.data = tdata;
                            var sel = document.getElementById("status");
                            $("#status").html("");
                            $("#status").find("option").remove();
                            var deviceSafeTypeS = res.data.deviceSafeTypeS;
                            if (selectValue == "undefined" || selectValue == "全部") {
                                $("#status").append("<option value='全部' selected='selected'>全部</option>")
                            } else {
                                $("#status").append("<option value='全部'>全部</option>")
                            }
                            deviceSafeTypeS.forEach(function (t, i) {
                                if (selectValue == t) {
                                    $("#status").append("<option value='" + t + "' selected='selected' >" + t + "</option>")
                                } else {
                                    $("#status").append("<option value='" + t + "' >" + t + "</option>")
                                }
                            });
                            form.render('select');
                            table.render(tableObj);
                        } else {
                            layer.alert(res.msg, { icon: 5 });
                        }
                    },
                    error: function (message) {
                        layer.alert("保存失败！", { icon: 5 });
                    }
                });
            }
            function deviceDateSafeEditAjax(data) {
                if (parentLogin()) {
                    var dataValue = {
                        deviceDateSafeEditForms: data
                    }
                    $.ajax({
                        type: "POST",
                        url: '/deviceDateSafe/edit',
                        contentType: "application/json; charset=utf-8",
                        data: JSON.stringify(dataValue),
                        dataType: "json",
                        async: false,
                        success: function (res) {
                            layer.closeAll()
                            if (res.code == 200) {
                                layer.alert(res.msg, { icon: 1 }, function () {
                                    layer.closeAll()
                                    window.location.reload();
                                })
                            } else {
                                layer.alert(res.msg, { icon: 5 });
                            }
                        },
                        error: function (message) {
                            layer.alert("保存失败！", { icon: 5 });
                        }
                    });
                }
            }
            function init() {
                ajax(datawher)
            }
            //初始
            init();

            //定期维护
            function deviceFun() {
                var datawhere = {
                    thisSafeTime: timeToDate(new Date(), true).trim(),
                    deviceCode: getQueryString2('deviceCode'),
                }
                $.ajax({
                    type: "POST",
                    url: '/deviceRegularSafe/get',
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(datawhere),
                    dataType: "json",
                    async: false,
                    success: function (res) {
                        console.log(res)
                        if (res.code == 200) {
                            var data = res.data;
                            $('#deviceCode').html(data.deviceName);
                            $('[name=regularSafeId]').val(data.regularSafeId)
                            $('[name=amongstPerson]').val(data.amongstPerson)
                            $('[name=deviceCode]').val(data.deviceCode)
                            $('[name=deviceName]').val(data.deviceName)
                            $('[name=deviceOperator]').val(data.deviceOperator)
                            $('[name=devicePlace]').val(data.devicePlace)
                            $('[name=humidity]').val(data.humidity)
                            $('[name=lastSafeTime]').val(data.lastSafeTime)
                            $('[name=nextSafeTime]').val(data.nextSafeTime)
                            $('[name=qcOperator]').val(data.qcOperator)
                            $('[name=result]').val(data.result)
                            $('[name=safePerson]').val(data.safePerson)
                            $('[name=safeTool]').val(data.safeTool)
                            $('[name=softwareVersion]').val(data.softwareVersion)
                            $('[name=temperature]').val(data.temperature)
                            $('[name=testOperator]').val(data.testOperator)
                            $('[name=thisSafeTime]').val(data.thisSafeTime)
                            deviceTableObj.data = res.data.deviceRegularSafeResVOS;
                            table.render(deviceTableObj);
                            $("#deviceTable").next().find('.layui-table-main').addClass('mainHeight');
                        }
                    },
                    error: function (res) {
                        layer.alert("未知错误！", { icon: 5 });
                    }
                });
            }
            form.on('submit(regularFrom)', function (obj) {
                var regularFomeData = {
                    deviceRegularSafeResForms: layui.table.cache.deviceTable,
                    regularSafeId: parseInt(obj.field.regularSafeId),
                    deviceName: obj.field.deviceName,
                    deviceCode: obj.field.deviceCode,
                    devicePlace: obj.field.devicePlace,
                    thisSafeTime: obj.field.thisSafeTime,
                    nextSafeTime: obj.field.nextSafeTime,
                    lastSafeTime: obj.field.lastSafeTime,
                    temperature: obj.field.temperature,
                    safePerson: obj.field.safePerson,
                    humidity: obj.field.humidity,
                    safeTool: obj.field.safeTool,
                    softwareVersion: obj.field.softwareVersion,
                    result: obj.field.result,
                    deviceOperator: obj.field.deviceOperator,
                    qcOperator: obj.field.qcOperator,
                    testOperator: obj.field.testOperator,
                    amongstPerson: obj.field.amongstPerson
                }
                $.ajax({
                    type: "POST",
                    url: '/deviceRegularSafe/edit',
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(regularFomeData),
                    dataType: "json",
                    async: false,
                    success: function (res) {
                        if (res.code == 200) {
                            layer.alert(res.msg, { icon: 1, time: 1000 });
                        } else {
                            layer.alert(res.msg, { icon: 5, time: 3000 });
                        }
                    },
                    error: function (message) {
                        layer.alert("提交失败！", { icon: 5, time: 1000 });
                    }
                });
            });
            //tab事件监听
            element.on('tab(regular)', function (data) {
                if (data.index == 0) {
                    // $('#plateNo').focus()
                    // qcName = $('[name=u1]').val();
                }
                if (data.index == 1) {
                    // console.log(getQueryString2('deviceCode'))
                    // $('#deviceCode').html(getDeviceName(getQueryString2('deviceCode')))
                    if (parentLogin()) {
                        $("#deviceTable").next().find('.layui-table-main').addClass('mainHeight');
                        deviceFun();
                    }
                }
                if (data.index == 2) {
                    var data = {
                        "deviceCode": getQueryString2('deviceCode') || ''
                    }
                    $.ajax({
                        contentType: 'application/json',
                        type: 'get',
                        url: '/ShowBoard/getDeviceByCode/' + data.deviceCode,
                        dataType: "json",
                        // data: JSON.stringify(data),
                        success: function (response) {
                            console.log('设备信息=', response)
                            var responseData = response.data.device;
                            responseData.last_check_time != null ? responseData.last_check_time = timeToDate(responseData.last_check_time, true) : '';
                            responseData.next_check_time != null ? responseData.next_check_time = timeToDate(responseData.next_check_time, true) : '';
                            var devstatus = {
                                "0": "启动",
                                "1": "暂停",
                                "2": "停机",
                                null: "停机",
                            }
                            var deviceInfostatus = {
                                "0": "state-green",
                                "1": "state-yellow",
                                "2": "state-gray",
                                null: "state-gray",
                            }
                            var html = '';
                            html += '<div>' +
                                // '   <div class="itemTit">' +
                                // '       <span class="border-blue">设备参数</span>' +
                                // '   </div>' +
                                '       <div class="listStyle">' +
                                '			<div class="col2"><span>所属厂区:</span><span>' + responseData.belong_plant_area + '</span></div>' +
                                '			<div class="col2"><span>设备状态:</span><span>' + devstatus[responseData.device_status] +
                                '				<i class="' + deviceInfostatus[responseData.device_status] + '" style="margin-left: 10px;"></i></span></div>' +
                                '			<div class="col2"><span>设备名称:</span><span>' + responseData.device_name + '</span></div>' +
                                '			<div class="col2"><span>设备型号:</span><span>' + responseData.device_model + '</span></div>' +
                                '           <div class="col2"><span>上次检测时间:</span><span>' + responseData.last_check_time + '</span></div>' +
                                '           <div class="col2"><span>下次检测时间:</span><span>' + responseData.next_check_time + '</span></div>' +
                                '			<div class="col2"><span>设备类型:</span><span>' + responseData.device_type + '</span></div>' +
                                '			<div class="col2"><span>设备站位:</span><span>' + responseData.device_sort + '</span></div>' +
                                '		    <div class="col2"><span>所属产线:</span><span>' + responseData.belong_line + '</span></div>' +
                                '			<div class="col2"><span>所属工序:</span><span>' + responseData.belong_process + '</span></div>' +
                                '       </div>' +
                                '</div>';
                            $('.mainBox').html(html)
                        }
                    });
                }
            });
            laydate.render({
                elem: '#thisSafeTime'
                , value: new Date()
            });
            laydate.render({
                elem: '#nextSafeTime'
                , value: new Date()
            });
            laydate.render({
                elem: '#lastSafeTime'
                , value: new Date()
            });
            // table.render();
        })
    };

</script>

</html>